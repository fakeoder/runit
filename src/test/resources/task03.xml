<?xml version="1.0" encoding="UTF-8" ?>
<task id="TASK-001" name="task template" beginAction="sleepNone" description="this is a template">
    <context>
        <variable>
            <key>profile</key>
            <value>dev</value>
        </variable>
        <variable>
            <key>timeout</key>
            <value>10</value>
        </variable>
    </context>
    <actions>
        <action id="sleepNone" preCondition="any" timeout="3" class="com.fakeoder.runit.core.action.insts.template.SleepNone">
                <initParameters>
                    <initParameter>
                        <name>during</name>
                        <expression>5</expression>
                    </initParameter>
                    <initParameter>
                        <name>env</name>
                        <expression>${profile}</expression>
                    </initParameter>
                </initParameters>
                <timeoutProcessor class="com.fakeoder.runit.core.processor.insts.DefaultTimeoutProcessor"></timeoutProcessor>
                <exceptionProcessor class="com.fakeoder.runit.core.processor.insts.DefaultExceptionProcessor"></exceptionProcessor>
                <initDataProcessor class="com.fakeoder.runit.core.processor.insts.DefaultInitDataProcessor" expression=""></initDataProcessor>
                <postDataProcessor class="com.fakeoder.runit.core.processor.insts.DefaultPostDataProcessor" expression=""></postDataProcessor>
        </action>
        <action id="http-baidu" preCondition="any" timeout="3" class="com.fakeoder.runit.core.action.insts.HttpAction">
            <initParameters>
                <initParameter>
                    <name>url</name>
                    <expression>https://www.baidu.com/</expression>
                </initParameter>
                <initParameter>
                    <name>method</name>
                    <expression>get</expression>
                </initParameter>
                <initParameter>
                    <name>header</name>
                    <expression>{"Accept":"text/javascript","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"}</expression>
                </initParameter>
            </initParameters>
            <timeoutProcessor class="com.fakeoder.runit.core.processor.insts.DefaultTimeoutProcessor"></timeoutProcessor>
            <exceptionProcessor class="com.fakeoder.runit.core.processor.insts.DefaultExceptionProcessor"></exceptionProcessor>
            <initDataProcessor class="com.fakeoder.runit.core.processor.insts.DefaultInitDataProcessor" expression=""></initDataProcessor>
            <postDataProcessor class="com.fakeoder.runit.core.processor.insts.DefaultPostDataProcessor" expression=""></postDataProcessor>
        </action>
        <action id="saveToFile" preCondition="any" timeout="3" class="com.fakeoder.runit.core.action.insts.SaveToFile">
            <initParameters>
                <initParameter>
                    <name>path</name>
                    <expression>/mnt/c/Users/joele/Desktop/index.html</expression>
                </initParameter>
            </initParameters>
            <timeoutProcessor class="com.fakeoder.runit.core.processor.insts.DefaultTimeoutProcessor"></timeoutProcessor>
            <exceptionProcessor class="com.fakeoder.runit.core.processor.insts.DefaultExceptionProcessor"></exceptionProcessor>
            <initDataProcessor class="com.fakeoder.runit.core.processor.insts.DefaultInitDataProcessor" expression="#{content}===toString(${http-baidu.result.response})"></initDataProcessor>
            <postDataProcessor class="com.fakeoder.runit.core.processor.insts.DefaultPostDataProcessor" expression=""></postDataProcessor>
        </action>
    </actions>
    <arranger>
        <flow from="sleepNone" to="http-baidu">
            <condition expression="equals(${sleepNone.status},'SUCCESS')"></condition>
        </flow>
        <flow from="http-baidu" to="saveToFile">
            <condition expression="1==1"></condition>
        </flow>
    </arranger>
</task>